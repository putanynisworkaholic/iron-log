@tailwind base;
@tailwind components;
@tailwind utilities;

* {
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  -webkit-tap-highlight-color: transparent;
}

/* ─── THEME VARIABLES ─────────────────────────────────────── */

:root,
[data-theme="light"] {
  --t-bg:           #ffffff;
  --t-bg-alt:       #f9fafb;
  --t-bg-alt2:      #f3f4f6;
  --t-text:         #000000;
  --t-text-inv:     #ffffff;
  --t-muted:        #9ca3af;
  --t-muted-soft:   #d1d5db;
  --t-border:       #000000;
  --t-border-light: #f3f4f6;
  --t-border-mid:   #e5e7eb;
  --t-accent:       #000000;
  --t-accent-text:  #ffffff;
  --t-cheat:        #e85d04;
}

[data-theme="dark"] {
  --t-bg:           #0d0d0d;
  --t-bg-alt:       #1a1a1a;
  --t-bg-alt2:      #222222;
  --t-text:         #f0f0f0;
  --t-text-inv:     #0d0d0d;
  --t-muted:        #888888;
  --t-muted-soft:   #555555;
  --t-border:       #f0f0f0;
  --t-border-light: #2a2a2a;
  --t-border-mid:   #383838;
  --t-accent:       #f0f0f0;
  --t-accent-text:  #0d0d0d;
  --t-cheat:        #ff6b35;
}

[data-theme="cherry"] {
  --t-bg:           #0d0000;
  --t-bg-alt:       #1a0000;
  --t-bg-alt2:      #240000;
  --t-text:         #f4e0e0;
  --t-text-inv:     #ffffff;
  --t-muted:        #c07070;
  --t-muted-soft:   #7a3030;
  --t-border:       #e30202;
  --t-border-light: #1e0000;
  --t-border-mid:   #3a0000;
  --t-accent:       #e30202;
  --t-accent-text:  #ffffff;
  --t-cheat:        #ff8c42;
}

[data-theme="blue"] {
  --t-bg:           #061022;
  --t-bg-alt:       #0d1f3a;
  --t-bg-alt2:      #102040;
  --t-text:         #bde8f5;
  --t-text-inv:     #061022;
  --t-muted:        #4988c4;
  --t-muted-soft:   #1c4d8d;
  --t-border:       #4988c4;
  --t-border-light: #0d1f3a;
  --t-border-mid:   #1c4d8d;
  --t-accent:       #4988c4;
  --t-accent-text:  #061022;
  --t-cheat:        #ff6b35;
}

/* ─── BASE ────────────────────────────────────────────────── */

body {
  background-color: var(--t-bg);
  color: var(--t-text);
  font-family: 'Inter', 'Helvetica Neue', Helvetica, Arial, sans-serif;
  overscroll-behavior: none;
}

@layer utilities {
  .text-xxs {
    font-size: 0.65rem;
    line-height: 1rem;
  }
}

/* ─── THEME OVERRIDES ─────────────────────────────────────── */

/* Backgrounds */
:not([data-theme="light"]) .bg-white              { background-color: var(--t-bg)      !important; }
:not([data-theme="light"]) .bg-black              { background-color: var(--t-accent)   !important; }
:not([data-theme="light"]) .bg-gray-50            { background-color: var(--t-bg-alt)   !important; }
:not([data-theme="light"]) .bg-gray-100           { background-color: var(--t-bg-alt2)  !important; }
:not([data-theme="light"]) .min-h-screen          { background-color: var(--t-bg); }

/* Text */
:not([data-theme="light"]) .text-black            { color: var(--t-text)      !important; }
:not([data-theme="light"]) .text-white            { color: var(--t-text-inv)  !important; }
:not([data-theme="light"]) .text-gray-300         { color: var(--t-muted-soft) !important; }
:not([data-theme="light"]) .text-gray-400         { color: var(--t-muted)     !important; }
:not([data-theme="light"]) .text-gray-500         { color: var(--t-muted)     !important; }
:not([data-theme="light"]) .text-gray-600         { color: var(--t-muted)     !important; }

/* Borders */
:not([data-theme="light"]) .border-black          { border-color: var(--t-border)       !important; }
:not([data-theme="light"]) .border-gray-50        { border-color: var(--t-border-light) !important; }
:not([data-theme="light"]) .border-gray-100       { border-color: var(--t-border-light) !important; }
:not([data-theme="light"]) .border-gray-200       { border-color: var(--t-border-mid)   !important; }
:not([data-theme="light"]) .border-gray-300       { border-color: var(--t-border-mid)   !important; }

/* Active/hover states */
:not([data-theme="light"]) .active\:bg-black:active       { background-color: var(--t-accent)  !important; }
:not([data-theme="light"]) .active\:bg-gray-50:active     { background-color: var(--t-bg-alt)  !important; }
:not([data-theme="light"]) .active\:text-black:active     { color: var(--t-text)               !important; }
:not([data-theme="light"]) .active\:text-white:active     { color: var(--t-text-inv)           !important; }
:not([data-theme="light"]) .active\:border-black:active   { border-color: var(--t-border)      !important; }
:not([data-theme="light"]) .hover\:bg-gray-50:hover       { background-color: var(--t-bg-alt)  !important; }

/* Divide colors */
:not([data-theme="light"]) .divide-gray-100 > :not([hidden]) ~ :not([hidden]) { border-color: var(--t-border-light) !important; }

/* ─── COLLAPSE ANIMATION ─────────────────────────────────── */
.collapse-content {
  display: grid;
  grid-template-rows: 0fr;
  transition: grid-template-rows 0.35s cubic-bezier(0.4, 0, 0.2, 1),
              opacity 0.25s ease;
}
.collapse-content.open {
  grid-template-rows: 1fr;
}
.collapse-inner {
  overflow: hidden;
}

/* ─── FADE IN ─────────────────────────────────────────────── */
@keyframes fadeIn {
  from { opacity: 0; transform: translateY(4px); }
  to   { opacity: 1; transform: translateY(0); }
}
.fade-in {
  animation: fadeIn 0.3s ease forwards;
}

/* ─── STAGGER ─────────────────────────────────────────────── */
@keyframes cardIn {
  from { opacity: 0; transform: translateY(10px); }
  to   { opacity: 1; transform: translateY(0); }
}
.stagger-item {
  animation: cardIn 0.3s ease forwards;
  animation-delay: calc(var(--i, 0) * 60ms);
  opacity: 0;
}

/* ─── PAGE TRANSITION ─────────────────────────────────────── */
.page-transition {
  animation: fadeIn 0.25s ease forwards;
}

/* ─── SHAKE ───────────────────────────────────────────────── */
@keyframes shake {
  0%, 100% { transform: translateX(0); }
  20% { transform: translateX(-8px); }
  40% { transform: translateX(8px); }
  60% { transform: translateX(-8px); }
  80% { transform: translateX(8px); }
}
.animate-shake { animation: shake 0.4s ease; }

/* ─── PULSE GLOW ──────────────────────────────────────────── */
@keyframes pulseGlow {
  0%   { box-shadow: 0 0 0 0 rgba(128, 128, 128, 0.4); }
  50%  { box-shadow: 0 0 0 8px rgba(128, 128, 128, 0); }
  100% { box-shadow: 0 0 0 0 rgba(128, 128, 128, 0); }
}
.pulse-glow {
  animation: pulseGlow 0.8s ease;
}

/* ─── PIN FILL ────────────────────────────────────────────── */
@keyframes pinFill {
  0%   { transform: scale(0.6); opacity: 0.5; }
  50%  { transform: scale(1.2); opacity: 1; }
  100% { transform: scale(1.1); opacity: 1; }
}
.pin-fill {
  animation: pinFill 0.2s ease forwards;
}

/* ─── MOTIVATIONAL ICON FLOAT ─────────────────────────────── */
@keyframes iconFloat {
  0%, 100% { transform: translateY(0); }
  50%      { transform: translateY(-5px); }
}
.icon-float {
  animation: iconFloat 1.2s ease-in-out infinite;
  display: inline-block;
}
.icon-float.paused {
  animation-play-state: paused;
}

/* ─── MOTIVATIONAL MESSAGE TRANSITIONS ────────────────────── */
@keyframes msgOut {
  from { opacity: 1; transform: translateY(0); }
  to   { opacity: 0; transform: translateY(-6px); }
}
@keyframes msgIn {
  from { opacity: 0; transform: translateY(6px); }
  to   { opacity: 1; transform: translateY(0); }
}
.msg-out { animation: msgOut 0.4s ease forwards; }
.msg-in  { animation: msgIn  0.4s ease forwards; }

/* ─── COUNT UP ────────────────────────────────────────────── */
.count-up {
  display: inline-block;
  animation: fadeIn 0.5s ease forwards;
}

/* ─── SCROLLBAR ───────────────────────────────────────────── */
::-webkit-scrollbar { width: 2px; }
::-webkit-scrollbar-track { background: var(--t-bg); }
::-webkit-scrollbar-thumb { background: var(--t-accent); }

/* ─── BUTTON PRESS ────────────────────────────────────────── */
button {
  transition: transform 0.15s ease, opacity 0.15s ease;
}
button:active {
  transform: scale(0.95);
  opacity: 0.85;
}

/* ─── MODAL ───────────────────────────────────────────────── */
@keyframes modalPop {
  from { opacity: 0; transform: scale(0.85); }
  to   { opacity: 1; transform: scale(1); }
}
.modal-pop {
  animation: modalPop 0.25s cubic-bezier(0.34, 1.56, 0.64, 1) forwards;
}

@keyframes backdropIn {
  from { opacity: 0; }
  to   { opacity: 1; }
}
.modal-backdrop {
  animation: backdropIn 0.2s ease forwards;
}

/* ─── SELECT PULSE ────────────────────────────────────────── */
@keyframes selectPulse {
  0%   { transform: scale(1); }
  50%  { transform: scale(1.05); }
  100% { transform: scale(1); }
}
.select-pulse {
  animation: selectPulse 0.2s ease;
}

/* ─── ICON BOUNCE ON SELECT ───────────────────────────────── */
@keyframes iconBounce {
  0%   { transform: translateY(0); }
  40%  { transform: translateY(-4px); }
  100% { transform: translateY(0); }
}
.icon-bounce {
  animation: iconBounce 0.3s ease forwards;
}

/* ─── CHECK DRAW ──────────────────────────────────────────── */
@keyframes checkDraw {
  from { stroke-dashoffset: 20; opacity: 0; }
  to   { stroke-dashoffset: 0;  opacity: 1; }
}
.check-draw {
  animation: checkDraw 0.2s ease-out forwards;
}

/* ─── CHEAT DAY ───────────────────────────────────────────── */
.calendar-cheat {
  color: var(--t-cheat);
  font-weight: 700;
}

/* ─── ROAST FADE IN ───────────────────────────────────────── */
.roast-fade {
  animation: fadeIn 0.3s ease forwards;
}

/* ─── PILL BUTTON ─────────────────────────────────────────── */
.pill-btn {
  border-radius: 20px;
  transition: all 0.15s ease;
}
.pill-btn.active {
  background-color: var(--t-accent);
  color: var(--t-accent-text);
  border-color: var(--t-accent);
}

/* ─── CARD RADIUS ─────────────────────────────────────────── */
.r-card { border-radius: 12px; }
.r-btn  { border-radius: 8px; }

/* ─── ACCESSIBILITY ───────────────────────────────────────── */
@media (prefers-reduced-motion: reduce) {
  *, *::before, *::after {
    animation-duration: 0.01ms !important;
    transition-duration: 0.01ms !important;
  }
}

/* ─── SAFE AREA ───────────────────────────────────────────── */
@supports (padding-bottom: env(safe-area-inset-bottom)) {
  .safe-bottom {
    padding-bottom: calc(0.75rem + env(safe-area-inset-bottom));
  }
}
